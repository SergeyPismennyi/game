(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=4)})([function(a,b){'use strict';const c={resourceCache:{},loading:[],readyCallbacks:[]};c.get=function(a){return this.resourceCache[a]},c.isReady=function(){let a=!0;const b=Object.keys(this.resourceCache);return b.forEach((b)=>{Object.prototype.hasOwnProperty.call(this.resourceCache,b)&&!this.resourceCache[b]&&(a=!1)}),a},c.onReady=function(a){this.readyCallbacks.push(a)},c.loadImage=function(a){if(this.resourceCache[a])return this.resourceCache[a];const b=new Image;return b.onload=()=>{this.resourceCache[a]=b,this.isReady()&&this.readyCallbacks.forEach((a)=>{a()})},this.resourceCache[a]=!1,b.src=a,0},c.loadAudio=function(a){if(this.resourceCache[a])return this.resourceCache[a];const b=new Audio;return b.onloadedmetadata=()=>{this.resourceCache[a]=b,this.isReady()&&this.readyCallbacks.forEach((a)=>{a()})},this.resourceCache[a]=!1,b.src=a,0},c.load=function(a){a instanceof Array?a.forEach((a)=>{-1===a.search(/img/)?this.loadAudio(a):this.loadImage(a)}):-1===a.search(/img/)?this.loadAudio(a):this.loadImage(a)},b.a=c},function(a,b,c){'use strict';function d(a,b,c,d,e,f,g,h){this.pos=b,this.size=c,this.middle=d,this.speed='number'==typeof e?e:0,this.frames=f,this.index=0,this.url=a,this.dir=g||'horizontal',this.once=h}var e=c(0);d.prototype.update=function(a){this.index+=this.speed*a},d.prototype.render=function(a){let b;if(0<this.speed){const a=this.frames.length,c=Math.floor(this.index);if(b=this.frames[c%a],this.once&&c>=a)return void(this.done=!0)}else b=0;let c=this.pos[0],d=this.pos[1];'vertical'===this.dir?d+=b*this.size[1]:c+=b*this.size[0],a.drawImage(e.a.get(this.url),c,d,this.size[0],this.size[1],0-this.middle[0],0-this.middle[1],this.size[0],this.size[1])},b.a=d},function(a,b){'use strict';var c=Math.pow;b.a=function(a,b){return Math.abs(Math.sqrt(c(b[0]-a[0],2)+c(b[1]-a[1],2)))}},function(a,b,c){'use strict';function d(a,b){f.innerHTML=a.health,g.innerHTML=a.shield,h.innerHTML=b,60<=a.health&&(f.style.color='green'),60>a.health&&30<=a.health&&(f.style.color='orange'),30>a.health&&(f.style.color='red'),g.style.color='blue'}function e(a){const b=a;i.forEach((a,c)=>{0!==c&&(b[0]>=c?a.style.backgroundColor='red':a.style.backgroundColor=m)}),j.forEach((a,c)=>{0!==c&&(b[1]>=c?a.style.backgroundColor='red':a.style.backgroundColor=m)}),k.forEach((a,c)=>{0!==c&&(b[2]>=c?a.style.backgroundColor='red':a.style.backgroundColor=m)}),l.forEach((a,c)=>{0!==c&&(b[3]>=c?a.style.backgroundColor='red':a.style.backgroundColor=m)})}c.d(b,'a',function(){return e}),c.d(b,'b',function(){return d});const f=document.querySelector('#health'),g=document.querySelector('#shield'),h=document.querySelector('#score'),i=document.querySelectorAll('#sheep-speed li'),j=document.querySelectorAll('#weapon-power li'),k=document.querySelectorAll('#shoot-speed li'),l=document.querySelectorAll('#bullets-speed li'),m='rgba(128, 128, 128, 0.2)'},function(a,b,c){'use strict';function d(){O=!1,Q=0,R=0,L=[],K=[],M=[],n()}function e(){O=!0;const a=document.querySelector('#game-over'),b=document.querySelector('#reset-button');b.addEventListener('click',()=>{a.style.display='none',d()}),a.style.display='flex',Object(F.a)(R)}function f(a){H.save(),H.translate(a.pos[0],a.pos[1]),H.rotate(a.rotate*q/180||0),a.sprite.render(H),H.restore()}function g(a){for(let b=0;b<a.length;b+=1)f(a[b])}function h(a,b){let c=b+(360-a);return 360<c&&(c-=360),!!(180<c)||!(180>c)&&void 0}function i(){H.save();for(let a=0,b=0;15>a;b+=T,a+=1)for(let a=0,c=0;15>a;c+=T,a+=1)H.drawImage(u.a.get('img/background.jpg'),0,0,T,T,W.pos[0]+b,W.pos[1]+c,T,T);H.globalCompositeOperation='destination-in',H.fillRect(0,0,W.width,W.height),H.restore(),f(I),g(I.bullets),g(K),g(L),g(N),g(M)}function j(a){var b=Math.sin,c=Math.cos;0>=I.health&&e(),I.isShieldSprite()||100!==I.shield?I.isShieldSprite()&&0===I.shield&&I.setSprite(new v.a('img/player.png',[0,0],[90,90],[45,45],60,[0,1,2,3,2,1])):I.setSprite(new v.a('img/player-shield.png',[0,0],[100,100],[50,50],60,[0,1,2,3,2,1])),I.sprite.update(a);for(let d=0;d<I.bullets.length;d+=1){const e=I.bullets[d];e.pos[0]+=e.speed*a*c(e.rotate*q/180),e.pos[1]+=e.speed*a*b(e.rotate*q/180),(0>e.pos[1]||e.pos[1]>G.height||e.pos[0]>G.width)&&(I.bullets.splice(d,1),d-=1)}for(let d=0;d<L.length;d+=1){L[d].sprite.update(a);let e=180*Math.atan2(I.pos[1]-L[d].pos[1],I.pos[0]-L[d].pos[0])/q;0>e&&(e+=360);const f=h(e,L[d].rotate);if(t(L[d].rotate)!==t(e)&&(!0===f?(L[d].rotate+=L[d].rotateSpeed*a,360<t(L[d].rotate)&&(L[d].rotate=0)):!1===f?(L[d].rotate-=L[d].rotateSpeed*a,0>t(L[d].rotate)&&(L[d].rotate=360)):void 0===f&&(L[d].rotate+=L[d].rotateSpeed*a,360<t(L[d].rotate)&&(L[d].rotate=0))),100<r(s(L[d].pos[0]-I.pos[0],2)+s(L[d].pos[1]-I.pos[1],2))&&(L[d].pos[0]+=L[d].speed*a*c(L[d].rotate*q/180),L[d].pos[1]+=L[d].speed*a*b(L[d].rotate*q/180)),100>r(s(L[d].pos[0]-I.pos[0],2)+s(L[d].pos[1]-I.pos[1],2))&&(L[d].pos[0]-=L[d].speed*a*c(L[d].rotate*q/180),L[d].pos[1]-=L[d].speed*a*b(L[d].rotate*q/180)),600>=Object(B.a)(L[d].pos,I.pos)&&e-3<L[d].rotate&&e+3>L[d].rotate){const a=L[d].shootForEnemies();void 0!==a&&(K.push(a),V.emenyShoot())}if(0>=L[d].health){R+=100;const a=L[d].pos;L.splice(d,1),V.explosion(),N.push({pos:a,sprite:new v.a('img/Explosion.png',[0,0],[266,266],[132,132],40,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],void 0,!0)});const b=p(30*Math.random());9>b&&M.push(Object(D.a)(b,a)),d-=1}}for(let d=0;d<K.length;d+=1){const e=K[d];e.pos[0]+=e.speed*a*c(e.rotate*q/180),e.pos[1]+=e.speed*a*b(e.rotate*q/180),(0>e.pos[1]||e.pos[1]>G.height||e.pos[0]>G.width)&&(K.splice(d,1),d-=1)}for(let b=0;b<N.length;b+=1)N[b].sprite.update(a),N[b].sprite.done&&(N.splice(b,1),b-=1);for(let b=0;b<M.length;b+=1)M[b].setLiveTine(a),M[b].isDelete()&&(M.splice(b,1),b-=1)}function k(a){S+=a;let b,c=1;if(2e3>R?b=30:2e3<=R&&4e3>R?b=40:4e3<=R&&1e4>R?b=50:1e4<=R&&15000>R?b=60:15000<=R&&2e4>R?(b=100,c=0.5):(b=200,c=0.2),S>=c&&L.length<=b){const a=p(4*Math.random()),b=[0,0];1===a&&(b[0]=p(Math.random()*(W.width-110)),b[1]=W.pos[1]-55),2===a&&(b[0]=W.width+W.pos[0]+55,b[1]=p(Math.random()*(W.height+W.pos[1]+55))),3===a&&(b[0]=p(Math.random()*(W.width-110)),b[1]=W.height+W.pos[1]+55),4===a&&(b[0]=W.pos[0]-55,b[1]=p(Math.random()*(W.height+W.pos[1]+55)));let c;c=2e3>=R?p(1*Math.random()):5e3>=R?p(2*Math.random()):p(3*Math.random()),1===c&&L.push(new x.a(b,100,50,10,0,X[0],new v.a('img/enemy-1.png',[0,0],[90,90],[45,45],60,[0,1,2,3,2,1]))),2===c&&L.push(new x.a(b,150,70,20,0,X[1],new v.a('img/enemy-2.png',[0,0],[90,90],[45,45],60,[0,1,2,3,2,1]))),3===c&&L.push(new x.a(b,200,100,30,0,X[2],new v.a('img/enemy-3.png',[0,0],[90,90],[45,45],60,[0,1,2,3,2,1]))),S=0}}function l(a){Q+=a,Object(C.b)(I,R),Object(z.a)(I,L,K,N,M,V,w.a,W,G,a),j(a),k(a),Object(A.a)(L,I,K,M,V)}function m(){if(!O&&!P){const a=new Date,b=(a-J)/1e3;o(),l(b),i(),V.playMainTheme(),J=a,window.requestAnimationFrame(m)}}function n(){J=Date.now(),P=!1,document.querySelector('.menu').style.display='none';const a=document.querySelectorAll('.text');a.forEach((a)=>{a.style.display='block'}),U=new y.a(10,300,700,new v.a('img/bullets.png',[0,0],[42,20],[21,10])),I=new x.a([G.width/2,G.height/2],400,180,100,0,U,new v.a('img/player.png',[0,0],[90,90],[45,45],60,[0,1,2,3,2,1])),W.pos=[0,0],Object(C.a)(I.getSheepState()),V=new E.a,m()}function o(){if(w.a.isDown('ESC')){const a=document.querySelector('#pause'),b=document.querySelector('#resume'),c=document.querySelector('#reset');P=!0,a.style.display='flex',b.onclick=()=>{J=new Date,P=!1,a.style.display='none',m()},c.onclick=()=>{P=!1,a.style.display='none',d()}}}var p=Math.ceil,q=Math.PI,r=Math.sqrt,s=Math.pow,t=Math.floor;Object.defineProperty(b,'__esModule',{value:!0});var u=c(0),v=c(1),w=c(5),x=c(6),y=c(7),z=c(8),A=c(9),B=c(2),C=c(3),D=c(10),E=c(11),F=c(12);const G=document.createElement('canvas'),H=G.getContext('2d');document.body.appendChild(G);let I,J=0,K=[],L=[],M=[];const N=[];let O,P,Q=0,R=0,S=0;const T=512;let U,V;const W={pos:[0,0],width:3e3,height:3e3},X=[new y.a(5,500,400,new v.a('img/bullets.png',[42,0],[42,20],[21,10])),new y.a(10,500,500,new v.a('img/bullets.png',[42,0],[42,20],[21,10])),new y.a(15,400,600,new v.a('img/bullets.png',[42,0],[42,20],[21,10]))];document.querySelector('#start-game').addEventListener('click',function(){u.a.load(['img/player.png','img/player-shield.png','img/enemy-1.png','img/enemy-2.png','img/enemy-3.png','img/Explosion.png','img/background.jpg','img/bullets.png','img/icons.png','sound/explosion.mp3','sound/shoot1.wav','sound/shoot2.wav','sound/item-up.mp3','sound/main-theme.mp3']),G.width=document.body.clientWidth,G.height=document.body.clientHeight,u.a.onReady(n)})},function(a,b){'use strict';function c(a,b){const c=a.keyCode;let d=0===c?'MOUSEDOWN':27===c?'ESC':32===c?'SPACE':37===c?'LEFT':38===c?'UP':39===c?'RIGHT':40===c?'DOWN':String.fromCharCode(c);e[d]=b}function d(a){f[0]=a.clientX,f[1]=a.clientY}let e={};const f=[0,0];document.addEventListener('keydown',(a)=>{c(a,!0)}),document.addEventListener('keyup',(a)=>{c(a,!1)}),window.addEventListener('blur',()=>{e={}}),document.addEventListener('mousemove',(a)=>{d(a)}),document.addEventListener('mousedown',(a)=>{const b={keyCode:a.button};c(b,!0)}),document.addEventListener('mouseup',(a)=>{const b={keyCode:a.button};c(b,!1)});b.a={isDown:(a)=>e[a.toUpperCase()],getMouseCoords:()=>f}},function(a,b){'use strict';function c(a,b,c,d,e,f,g){this.pos=a,this.speed=b,this.rotateSpeed=c,this.health=d,this.shield=e,this.weapon=f,this.sprite=g,this.rotate=0,this.lastShoot=Date.now(),this.bullets=[],this.shieldSprite=!1,this.state=[0,0,0,0]}c.prototype.shoot=function(){return!!(Date.now()-this.lastShoot>this.weapon.shootSpeed)&&(this.bullets.push({pos:[this.pos[0],this.pos[1]],rotate:this.rotate,speed:this.weapon.bulletsSpeed,damage:this.weapon.damage,sprite:this.weapon.sprite}),this.lastShoot=Date.now(),!0)},c.prototype.shootForEnemies=function(){return Date.now()-this.lastShoot>this.weapon.shootSpeed?(this.lastShoot=Date.now(),{pos:[this.pos[0],this.pos[1]],rotate:this.rotate,speed:this.weapon.bulletsSpeed,damage:this.weapon.damage,sprite:this.weapon.sprite}):void 0},c.prototype.setItem=function(a){'health'===a.name&&(this.health=100),'shield'===a.name&&(this.shield=100),'speed'===a.name&&5>this.state[0]&&(this.speed+=a.value,this.state[0]+=1),'damage'===a.name&&5>this.state[1]&&(this.weapon.damage+=a.value,this.state[1]+=1),'shootSpeed'===a.name&&5>this.state[2]&&(this.weapon.shootSpeed+=a.value,this.state[2]+=1),'bulletsSpeed'===a.name&&5>this.state[3]&&(this.weapon.bulletsSpeed+=a.value,this.state[3]+=1)},c.prototype.setDamage=function(a){0<this.shield?this.shield-=a:this.health-=a,0>this.health&&(this.health=0),0>this.shield&&(this.shield=0)},c.prototype.setSprite=function(a){this.sprite=a,this.shieldSprite=!this.shieldSprite},c.prototype.isShieldSprite=function(){return this.shieldSprite},c.prototype.getSheepState=function(){return this.state},b.a=c},function(a,b){'use strict';b.a=function(a,b,c,d){this.damage=a,this.shootSpeed=b,this.bulletsSpeed=c,this.sprite=d}},function(a,b){'use strict';b.a=function(a,b,c,d,e,f,g,h,i,j){let k=a.speed;(g.isDown('DOWN')||g.isDown('s'))&&(g.isDown('LEFT')||g.isDown('a'))&&(k*=0.7),(g.isDown('DOWN')||g.isDown('s'))&&(g.isDown('RIGHT')||g.isDown('d'))&&(k*=0.7),(g.isDown('UP')||g.isDown('w'))&&(g.isDown('LEFT')||g.isDown('a'))&&(k*=0.7),(g.isDown('UP')||g.isDown('w'))&&(g.isDown('RIGHT')||g.isDown('d'))&&(k*=0.7),(g.isDown('DOWN')||g.isDown('s'))&&(h.pos[1]>i.height-h.height+10&&a.pos[1]>i.height/2?(h.pos[1]-=k*j,b.forEach((a)=>{a.pos[1]-=k*j}),c.forEach((a)=>{a.pos[1]-=k*j}),d.forEach((a)=>{a.pos[1]-=k*j}),e.forEach((a)=>{a.pos[1]-=k*j}),a.bullets.forEach((a)=>{a.pos[1]-=k*j})):a.pos[1]<i.height-a.sprite.size[1]/2&&(a.pos[1]+=k*j)),(g.isDown('UP')||g.isDown('w'))&&(-10>h.pos[1]&&a.pos[1]<i.height/2?(h.pos[1]+=k*j,b.forEach((a)=>{a.pos[1]+=k*j}),c.forEach((a)=>{a.pos[1]+=k*j}),d.forEach((a)=>{a.pos[1]+=k*j}),e.forEach((a)=>{a.pos[1]+=k*j}),a.bullets.forEach((a)=>{a.pos[1]+=k*j})):a.pos[1]>a.sprite.size[1]/2&&(a.pos[1]-=k*j)),(g.isDown('LEFT')||g.isDown('a'))&&(-10>h.pos[0]&&a.pos[0]<i.width/2?(h.pos[0]+=k*j,b.forEach((a)=>{a.pos[0]+=k*j}),c.forEach((a)=>{a.pos[0]+=k*j}),d.forEach((a)=>{a.pos[0]+=k*j}),e.forEach((a)=>{a.pos[0]+=k*j}),a.bullets.forEach((a)=>{a.pos[0]+=k*j})):a.pos[0]>a.sprite.size[0]/2&&(a.pos[0]-=k*j)),(g.isDown('RIGHT')||g.isDown('d'))&&(h.pos[0]>i.width-h.width+10&&a.pos[0]>i.width/2?(h.pos[0]-=k*j,b.forEach((a)=>{a.pos[0]-=k*j}),c.forEach((a)=>{a.pos[0]-=k*j}),d.forEach((a)=>{a.pos[0]-=k*j}),e.forEach((a)=>{a.pos[0]-=k*j}),a.bullets.forEach((a)=>{a.pos[0]-=k*j})):a.pos[0]<i.width-a.sprite.size[0]/2&&(a.pos[0]+=k*j)),g.isDown('MOUSEDOWN')&&a.shoot()&&f.playerShoot();const l=g.getMouseCoords();let m=180*Math.atan2(l[1]-a.pos[1],l[0]-a.pos[0])/Math.PI;0>m&&(m+=360),a.rotate=m}},function(a,b,c){'use strict';function d(a,c,d,e,b,f,g,h){return!(d<=b||a>g||e<=f||c>h)}function e(a,b,c,e){return d(a[0],a[1],a[0]+b[0],a[1]+b[1],c[0],c[1],c[0]+e[0],c[1]+e[1])}function f(a,b){for(let c=0;c<a.length;c+=1){const d=a[c].pos,f=a[c].sprite.size;for(let g=0;g<b.bullets.length;g+=1){const h=b.bullets[g].pos,i=b.bullets[g].sprite.size;e(d,f,h,i)&&(a[c].setDamage(b.weapon.damage),b.bullets.splice(g,1),g-=1)}}}function g(a,b){const c=b.pos,d=b.sprite.size;for(let f=0;f<a.length;f+=1){const g=a[f].pos,h=a[f].sprite.size;e(g,h,c,d)&&(b.setDamage(a[f].damage),a.splice(f,1),f-=1)}}function h(a){for(let b=0;b<a.length;b+=1)for(let b=0;b<a.length;b+=1)for(let c=b+1;c<a.length;c+=1)e(a[b].pos,a[b].sprite.size,a[c].pos,a[c].sprite.size)&&(a[b].pos[1]>a[c].pos[1]?(a[b].pos[1]+=1,a[c].pos[1]-=1):(a[b].pos[1]-=1,a[c].pos[1]+=1),a[b].pos[0]>a[c].pos[0]?(a[b].pos[0]+=1,a[c].pos[0]-=1):(a[b].pos[0]-=1,a[c].pos[0]+=1))}function i(a,b,c){const d=a.pos;for(let e=0;e<b.length;e+=1){const f=b[e].pos;45>Object(j.a)(d,f)&&(a.setItem(b[e]),Object(k.a)(a.getSheepState()),c.itemUp(),b.splice(e,1),e-=1)}}var j=c(2),k=c(3);b.a=function(a,b,c,d,e){f(a,b),g(c,b),h(a),i(b,d,e)}},function(a,b,c){'use strict';function d(a,b,c,d){this.pos=a,this.name=b,this.value=c,this.sprite=d,this.deadTime=10,this.liveTime=0}var e=c(1);d.prototype.setLiveTine=function(a){this.liveTime+=a},d.prototype.isDelete=function(){return this.liveTime>=this.deadTime},b.a=function(a,b){return 1===a||2===a?new d(b,'health',100,new e.a('img/icons.png',[0,0],[40,40],[20,20],0,0)):3===a||4===a?new d(b,'shield',100,new e.a('img/icons.png',[40,0],[40,40],[20,20],0,0)):5===a?new d(b,'speed',20,new e.a('img/icons.png',[80,0],[40,40],[20,20],0,0)):6===a?new d(b,'damage',5,new e.a('img/icons.png',[120,0],[40,40],[20,20],0,0)):7===a?new d(b,'shootSpeed',-20,new e.a('img/icons.png',[160,0],[40,40],[20,20],0,0)):8===a?new d(b,'bulletsSpeed',20,new e.a('img/icons.png',[200,0],[40,40],[20,20],0,0)):void 0}},function(a,b,c){'use strict';function d(){this.explosionSound=e.a.get('sound/explosion.mp3'),this.emenyShootSound=e.a.get('sound/shoot1.wav'),this.shootSound=e.a.get('sound/shoot2.wav'),this.itemUpSound=e.a.get('sound/item-up.mp3'),this.mainTheme=e.a.get('sound/main-theme.mp3')}var e=c(0);d.prototype.explosion=function(){const a=this.explosionSound.cloneNode();a.play()},d.prototype.emenyShoot=function(){const a=this.emenyShootSound.cloneNode();a.play()},d.prototype.playerShoot=function(){const a=this.shootSound.cloneNode();a.play()},d.prototype.itemUp=function(){const a=this.itemUpSound.cloneNode();a.play()},d.prototype.playMainTheme=function(){this.playMainTheme.paused||this.mainTheme.play()},b.a=d},function(a,b){'use strict';function c(a,b){let c=[];return localStorage.getItem('spaceWarriorScore')&&(c=JSON.parse(localStorage.getItem('spaceWarriorScore'))),c.push({name:a,score:b}),c.sort((c,a)=>a.score-c.score),localStorage.removeItem('spaceWarriorScore'),localStorage.setItem('spaceWarriorScore',JSON.stringify(c)),c}function d(a){const b=document.createElement('ul');b.classList.add('leaders-list');for(let c=0;c<a.length;c+=1){const d=document.createElement('li'),e=document.createElement('span'),f=document.createElement('span');e.classList.add('name-col'),f.classList.add('score-col'),e.innerHTML=a[c].name,f.innerHTML=a[c].score,d.appendChild(e),d.appendChild(f),b.appendChild(d)}return b}function e(a){const b=document.querySelector('.leaders'),e=document.querySelector('#name').value||'unknown',f=document.querySelector('.score-col');document.querySelector('.leaders p').style.display='none',document.querySelector('#name').style.display='none',document.querySelector('#submit-name').style.display='none',document.querySelector('.name-col').style.display='inline-block',f.style.display='inline-block',document.querySelector('.game-over .header span').innerHTML='Leaders: ',b.insertBefore(d(c(e,a)),f.nextSibling)}function f(){const a=document.querySelector('.leaders'),b=document.querySelector('.leaders-list');document.querySelector('.leaders p').style.display='block',document.querySelector('#name').style.display='block',document.querySelector('#submit-name').style.display='block',document.querySelector('.name-col').style.display='none',document.querySelector('.score-col').style.display='none',document.querySelector('.game-over .header span').innerHTML='GAME OVER',b&&a.removeChild(b)}b.a=function(a){f();const b=document.querySelector('#submit-name');b.onclick=()=>e(a)}}]);